

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Geosearch (geosearch.py) &mdash; CanberraUAV Image Processing Tools (cuav) 1.4.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Development" href="../development/index.html" />
    <link rel="prev" title="Geotagger (geotag.py)" href="geotag.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> CanberraUAV Image Processing Tools (cuav)
          

          
          </a>

          
            
            
              <div class="version">
                1.4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installing/index.html">Installing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Getting Started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="pgm_conv.html">PGM Converter (pgm_convert.py)</a></li>
<li class="toctree-l2"><a class="reference internal" href="geotag.html">Geotagger (geotag.py)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Geosearch (geosearch.py)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#starting">Starting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running">Running</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cuavimagesource.html">Using the CanberraUAV Imagery Set</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CanberraUAV Image Processing Tools (cuav)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Getting Started</a> &raquo;</li>
        
      <li>Geosearch (geosearch.py)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/getting_started/geosearch.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="geosearch-geosearch-py">
<h1>Geosearch (geosearch.py)<a class="headerlink" href="#geosearch-geosearch-py" title="Permalink to this headline">¶</a></h1>
<div class="section" id="starting">
<h2>Starting<a class="headerlink" href="#starting" title="Permalink to this headline">¶</a></h2>
<p>This program searches a set of photos taken by a UAV and looks for any interesting or unusual objects (such as stranded people). Any candidate objects are georeferenced on a map and shown to the user.</p>
<p>The overall objective is to quickly and easily find the location of a missing person, based on a set of photos taken overhead by a UAS.</p>
<p>The algorithm used in geosearch is very conservative and errors on the side of caution when deciding if an object is &quot;interesting&quot; enough to flag to the user. Thus it is expected that many false positives are detected, at which point it is up to the user to figure out if an image contains the desired person or object.</p>
<p>The algorithm is tuned for finding person-sized and shaped objects that contrast well against the background. So a person laying down and wearing high-visibility clothing is easily found. It has been (somewhat humorously) noted that sheep to fit in this category too.</p>
<p>There are two ways of running geosearch:</p>
<ol class="arabic simple">
<li>With timestamped images and a flight log (use <code class="docutils literal"><span class="pre">--mavlog</span></code> to specify log)</li>
<li>With geotagged images (in jpg or png file format). Geotag format must be as per <a class="reference external" href="http://www.exiv2.org/tags.html">http://www.exiv2.org/tags.html</a></li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The geotags must contain the following tags: Exif.GPSInfo.GPS.LatitudeRef, Exif.GPSInfo.GPS.LongitudeRef,
Exif.GPSInfo.GPS.Latitude, Exif.GPSInfo.GPS.Longitude</p>
<p class="last">Optionally: Exif.GPSInfo.GPS.Altitude, Exif.Image.DateTime</p>
</div>
<p>It has the following options and arguments:</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="44%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>files</td>
<td>Directory containing png image files</td>
<td>(none)</td>
</tr>
<tr class="row-odd"><td>--mavlog</td>
<td>Telemetry logfile (tlog)</td>
<td>(none)</td>
</tr>
<tr class="row-even"><td>--mission</td>
<td>Waypoints text file for displaying mission</td>
<td>(none)</td>
</tr>
<tr class="row-odd"><td>--kmzlog</td>
<td>Kmz file for image positions</td>
<td>(none)</td>
</tr>
<tr class="row-even"><td>--triggerlog</td>
<td>Robota trigger file for image positions</td>
<td>(none)</td>
</tr>
<tr class="row-odd"><td>--time-offset</td>
<td>Offset between camera and mavlink log times</td>
<td>0 seconds</td>
</tr>
<tr class="row-even"><td>--view</td>
<td>Show images</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>--saveview</td>
<td>Save image view</td>
<td>False</td>
</tr>
<tr class="row-even"><td>--lens</td>
<td>Lens focal length</td>
<td>28</td>
</tr>
<tr class="row-odd"><td>--sensorwidth</td>
<td>Sensor (camera) width</td>
<td>35 mm</td>
</tr>
<tr class="row-even"><td>--service</td>
<td>Map tile service</td>
<td>MicrosoftSat</td>
</tr>
<tr class="row-odd"><td>--camera-params</td>
<td>Camera calibration json file from OpenCV</td>
<td>(none)</td>
</tr>
<tr class="row-even"><td>--debug</td>
<td>Enable debug info</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>--roll-stabilised</td>
<td>Is camera roll stabilised?</td>
<td>False</td>
</tr>
<tr class="row-even"><td>--rotate-180</td>
<td>Rotate images 180 degrees</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>--altitude</td>
<td>Altitude when images captured (0 for automatic)</td>
<td>0</td>
</tr>
<tr class="row-even"><td>--thumbsize</td>
<td>Thumbnail size</td>
<td>60</td>
</tr>
<tr class="row-odd"><td>--mosaic-thumbsize</td>
<td>Mosiac thumbnail size</td>
<td>35</td>
</tr>
<tr class="row-even"><td>--minscore</td>
<td>Minimum score for an objects to be 'detected'</td>
<td>100</td>
</tr>
<tr class="row-odd"><td>--gammalog</td>
<td>Gamma.log from flight</td>
<td>(none)</td>
</tr>
<tr class="row-even"><td>--target</td>
<td>Lat,lon,radius of area to search</td>
<td>(none)</td>
</tr>
<tr class="row-odd"><td>--categories</td>
<td>Xml file containing categories for classification</td>
<td>(none)</td>
</tr>
<tr class="row-even"><td>--flag</td>
<td>Flag positions</td>
<td>(none)</td>
</tr>
<tr class="row-odd"><td>--blue-emphasis</td>
<td>Enable blue emphasis in scanner</td>
<td>False</td>
</tr>
</tbody>
</table>
<p>If no arguments are supplied, a GUI appears asking for startup options.</p>
<p>Otherwise, it can be started directly from the command line. For example, In Linux:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">geosearch</span><span class="o">.</span><span class="n">py</span> <span class="o">&lt;</span><span class="n">arguments</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">folder</span><span class="o">&gt;</span>
<span class="n">geosearch</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">mavlog</span><span class="o">=</span><span class="n">flight</span><span class="o">.</span><span class="n">tlog</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">tosearch</span>
</pre></div>
</div>
</div>
<div class="section" id="running">
<h2>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h2>
<p>After starting Geosearch, 2 windows (by default) appear - a &quot;Mosaic&quot; window that shows a cropped image of any detected interesting images and the &quot;Map&quot; window which shows the location of the cropped image (plus UAV, if
using a tlog).</p>
<p>To start the processing, go to <code class="docutils literal"><span class="pre">GEOSearch</span> <span class="pre">-&gt;</span> <span class="pre">Start</span></code> in the menu of the Mosiac window (see below image, start
button in red).</p>
<img alt="../_images/geosearch0.png" src="../_images/geosearch0.png" />
<p>Once started, the GEOsearch runs through the images (and tlog, if used) at a faster-than-real-time rate. As interesting objects are found in the images, a cropped image of the detected object is displayed in the mosaic.</p>
<p>If many images are found, use the <code class="docutils literal"><span class="pre">View</span> <span class="pre">-&gt;</span> <span class="pre">Next</span> <span class="pre">Page</span></code> menu to scroll to the next page of the mosaic (in red, below).</p>
<p>The objects in the mosaic will all be geolocated onto the map (in blue, below).</p>
<img alt="../_images/geosearch1.png" src="../_images/geosearch1.png" />
<p>Left clicking on an image in the mosaic opens an information box in the map window (in red, below). This shows a high-contrast version of the detected object, plus its location and image file that it appeared in.</p>
<img alt="../_images/geosearch2.png" src="../_images/geosearch2.png" />
<p>Right-clicking on an image in the mosaic gives a menu. Use <code class="docutils literal"><span class="pre">Show</span> <span class="pre">Image</span></code> to open a separate window showing the entire image with blue boxes around the detected object(s) (see below). This is useful for showing the broader area around the detected object, giving better context.</p>
<img alt="../_images/geosearch3.png" src="../_images/geosearch3.png" />
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../development/index.html" class="btn btn-neutral float-right" title="Development" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="geotag.html" class="btn btn-neutral" title="Geotagger (geotag.py)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, CanberraUAV.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.4.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>